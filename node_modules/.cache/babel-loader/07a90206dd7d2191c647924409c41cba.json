{"ast":null,"code":"export var PiePreprocesser = function PiePreprocesser(data, userRole, email) {\n  if (!data || data.length === 0 || !data.report || data.report.length === 0) return;\n  var isDev = userRole === \"developer\";\n  var emailData = isDev ? data.report.filter(function (item) {\n    return item.email === email;\n  }) : data.report;\n  var TimeToSeconds = function TimeToSeconds(time) {\n    var t = time.split(\":\");\n    return t[0] * 3600 + t[1] * 60 + t[2] * 1;\n  };\n  var dataWODubl = [];\n  emailData.sort(function (a, b) {\n    return a.executable_name >= b.executable_name ? 1 : -1;\n  });\n  for (var i = 0; i < emailData.length; i++) {\n    if (i + 1 === emailData.length) break;\n    if (emailData[i].executable_name === emailData[i + 1].executable_name) {\n      dataWODubl.push({\n        name: emailData[i].executable_name,\n        time: TimeToSeconds(emailData[i].time_used) + TimeToSeconds(emailData[i + 1].time_used)\n      });\n      emailData.splice(i, 1);\n    } else {\n      dataWODubl.push({\n        name: emailData[i].executable_name,\n        time: TimeToSeconds(emailData[i].time_used)\n      });\n    }\n  }\n  dataWODubl.sort(function (a, b) {\n    return a.time < b.time ? 1 : -1;\n  });\n  if (dataWODubl.length > 6) {\n    var sum = dataWODubl.slice(5).reduce(function (a, _ref) {\n      var time = _ref.time;\n      return a + time;\n    }, 0);\n    dataWODubl = dataWODubl.slice(0, 5);\n    dataWODubl.push({\n      name: \"Others\",\n      time: sum\n    });\n  }\n  var series = dataWODubl.map(function (item) {\n    return item.time;\n  });\n  var labels = dataWODubl.map(function (item) {\n    var tempDate = new Date(0);\n    tempDate.setSeconds(item.time);\n    var timeString = tempDate.toISOString().substr(11, 8);\n    var ShortName = item.name.length > 10 ? item.name.slice(0, 10) + \"..\" : item.name;\n    return ShortName + \": \" + timeString;\n  });\n  return {\n    series: series,\n    labels: labels\n  };\n};\n\n//temp test data for pie\n\nexport var TestPieData = function TestPieData() {\n  var temp = Array.from({\n    length: 6\n  }, function () {\n    return Math.floor(Math.random() * 8400);\n  });\n  temp.sort(function (a, b) {\n    return a < b ? 1 : -1;\n  });\n  var getTime = function getTime(item) {\n    var tempDate = new Date(0);\n    tempDate.setSeconds(item);\n    var timeString = tempDate.toISOString().substr(11, 8);\n    return \": \" + timeString;\n  };\n  return {\n    series: temp,\n    labels: [\"Safari: \".concat(getTime(temp[0])), \"VsCode: \".concat(getTime(temp[1])), \"Terminal: \".concat(getTime(temp[2])), \"Chrome: \".concat(getTime(temp[3])), \"Finder: \".concat(getTime(temp[4])), \"others: \".concat(getTime(temp[5]))]\n  };\n};","map":{"version":3,"names":["PiePreprocesser","data","userRole","email","length","report","isDev","emailData","filter","item","TimeToSeconds","time","t","split","dataWODubl","sort","a","b","executable_name","i","push","name","time_used","splice","sum","slice","reduce","_ref","series","map","labels","tempDate","Date","setSeconds","timeString","toISOString","substr","ShortName","TestPieData","temp","Array","from","Math","floor","random","getTime","concat"],"sources":["/Users/drenyasova/diplome/src/views/NewDashboard/GQM/Preprocessers/PiePreprocesser.js"],"sourcesContent":["export const PiePreprocesser = (data, userRole, email) => {\n  if (!data || data.length === 0 || !data.report || data.report.length === 0)\n    return;\n  const isDev = userRole === \"developer\";\n\n  const emailData = isDev\n    ? data.report.filter((item) => item.email === email)\n    : data.report;\n\n  const TimeToSeconds = (time) => {\n    const t = time.split(\":\");\n    return t[0] * 3600 + t[1] * 60 + t[2] * 1;\n  };\n\n  let dataWODubl = [];\n  emailData.sort((a, b) => (a.executable_name >= b.executable_name ? 1 : -1));\n\n  for (let i = 0; i < emailData.length; i++) {\n    if (i + 1 === emailData.length) break;\n\n    if (emailData[i].executable_name === emailData[i + 1].executable_name) {\n      dataWODubl.push({\n        name: emailData[i].executable_name,\n        time:\n          TimeToSeconds(emailData[i].time_used) +\n          TimeToSeconds(emailData[i + 1].time_used),\n      });\n\n      emailData.splice(i, 1);\n    } else {\n      dataWODubl.push({\n        name: emailData[i].executable_name,\n        time: TimeToSeconds(emailData[i].time_used),\n      });\n    }\n  }\n  dataWODubl.sort((a, b) => (a.time < b.time ? 1 : -1));\n  if (dataWODubl.length > 6) {\n    const sum = dataWODubl.slice(5).reduce((a, { time }) => a + time, 0);\n    dataWODubl = dataWODubl.slice(0, 5);\n    dataWODubl.push({ name: \"Others\", time: sum });\n  }\n\n  const series = dataWODubl.map((item) => item.time);\n\n  const labels = dataWODubl.map((item) => {\n    let tempDate = new Date(0);\n    tempDate.setSeconds(item.time);\n    let timeString = tempDate.toISOString().substr(11, 8);\n    const ShortName =\n      item.name.length > 10 ? item.name.slice(0, 10) + \"..\" : item.name;\n    return ShortName + \": \" + timeString;\n  });\n\n  return {\n    series: series,\n    labels: labels,\n  };\n};\n\n//temp test data for pie\n\nexport const TestPieData = () => {\n  let temp = Array.from(\n    {\n      length: 6,\n    },\n    () => Math.floor(Math.random() * 8400)\n  );\n  temp.sort((a, b) => (a < b ? 1 : -1));\n  const getTime = (item) => {\n    let tempDate = new Date(0);\n    tempDate.setSeconds(item);\n    let timeString = tempDate.toISOString().substr(11, 8);\n    return \": \" + timeString;\n  };\n  return {\n    series: temp,\n    labels: [\n      `Safari: ${getTime(temp[0])}`,\n      `VsCode: ${getTime(temp[1])}`,\n      `Terminal: ${getTime(temp[2])}`,\n      `Chrome: ${getTime(temp[3])}`,\n      `Finder: ${getTime(temp[4])}`,\n      `others: ${getTime(temp[5])}`,\n    ],\n  };\n};\n"],"mappings":"AAAA,OAAO,IAAMA,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,IAAI,EAAEC,QAAQ,EAAEC,KAAK,EAAK;EACxD,IAAI,CAACF,IAAI,IAAIA,IAAI,CAACG,MAAM,KAAK,CAAC,IAAI,CAACH,IAAI,CAACI,MAAM,IAAIJ,IAAI,CAACI,MAAM,CAACD,MAAM,KAAK,CAAC,EACxE;EACF,IAAME,KAAK,GAAGJ,QAAQ,KAAK,WAAW;EAEtC,IAAMK,SAAS,GAAGD,KAAK,GACnBL,IAAI,CAACI,MAAM,CAACG,MAAM,CAAC,UAACC,IAAI;IAAA,OAAKA,IAAI,CAACN,KAAK,KAAKA,KAAK;EAAA,EAAC,GAClDF,IAAI,CAACI,MAAM;EAEf,IAAMK,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,IAAI,EAAK;IAC9B,IAAMC,CAAC,GAAGD,IAAI,CAACE,KAAK,CAAC,GAAG,CAAC;IACzB,OAAOD,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,GAAGA,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,GAAGA,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;EAC3C,CAAC;EAED,IAAIE,UAAU,GAAG,EAAE;EACnBP,SAAS,CAACQ,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC;IAAA,OAAMD,CAAC,CAACE,eAAe,IAAID,CAAC,CAACC,eAAe,GAAG,CAAC,GAAG,CAAC,CAAC;EAAA,CAAC,CAAC;EAE3E,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGZ,SAAS,CAACH,MAAM,EAAEe,CAAC,EAAE,EAAE;IACzC,IAAIA,CAAC,GAAG,CAAC,KAAKZ,SAAS,CAACH,MAAM,EAAE;IAEhC,IAAIG,SAAS,CAACY,CAAC,CAAC,CAACD,eAAe,KAAKX,SAAS,CAACY,CAAC,GAAG,CAAC,CAAC,CAACD,eAAe,EAAE;MACrEJ,UAAU,CAACM,IAAI,CAAC;QACdC,IAAI,EAAEd,SAAS,CAACY,CAAC,CAAC,CAACD,eAAe;QAClCP,IAAI,EACFD,aAAa,CAACH,SAAS,CAACY,CAAC,CAAC,CAACG,SAAS,CAAC,GACrCZ,aAAa,CAACH,SAAS,CAACY,CAAC,GAAG,CAAC,CAAC,CAACG,SAAS;MAC5C,CAAC,CAAC;MAEFf,SAAS,CAACgB,MAAM,CAACJ,CAAC,EAAE,CAAC,CAAC;IACxB,CAAC,MAAM;MACLL,UAAU,CAACM,IAAI,CAAC;QACdC,IAAI,EAAEd,SAAS,CAACY,CAAC,CAAC,CAACD,eAAe;QAClCP,IAAI,EAAED,aAAa,CAACH,SAAS,CAACY,CAAC,CAAC,CAACG,SAAS;MAC5C,CAAC,CAAC;IACJ;EACF;EACAR,UAAU,CAACC,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC;IAAA,OAAMD,CAAC,CAACL,IAAI,GAAGM,CAAC,CAACN,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC;EAAA,CAAC,CAAC;EACrD,IAAIG,UAAU,CAACV,MAAM,GAAG,CAAC,EAAE;IACzB,IAAMoB,GAAG,GAAGV,UAAU,CAACW,KAAK,CAAC,CAAC,CAAC,CAACC,MAAM,CAAC,UAACV,CAAC,EAAAW,IAAA;MAAA,IAAIhB,IAAI,GAAAgB,IAAA,CAAJhB,IAAI;MAAA,OAAOK,CAAC,GAAGL,IAAI;IAAA,GAAE,CAAC,CAAC;IACpEG,UAAU,GAAGA,UAAU,CAACW,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IACnCX,UAAU,CAACM,IAAI,CAAC;MAAEC,IAAI,EAAE,QAAQ;MAAEV,IAAI,EAAEa;IAAI,CAAC,CAAC;EAChD;EAEA,IAAMI,MAAM,GAAGd,UAAU,CAACe,GAAG,CAAC,UAACpB,IAAI;IAAA,OAAKA,IAAI,CAACE,IAAI;EAAA,EAAC;EAElD,IAAMmB,MAAM,GAAGhB,UAAU,CAACe,GAAG,CAAC,UAACpB,IAAI,EAAK;IACtC,IAAIsB,QAAQ,GAAG,IAAIC,IAAI,CAAC,CAAC,CAAC;IAC1BD,QAAQ,CAACE,UAAU,CAACxB,IAAI,CAACE,IAAI,CAAC;IAC9B,IAAIuB,UAAU,GAAGH,QAAQ,CAACI,WAAW,CAAC,CAAC,CAACC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;IACrD,IAAMC,SAAS,GACb5B,IAAI,CAACY,IAAI,CAACjB,MAAM,GAAG,EAAE,GAAGK,IAAI,CAACY,IAAI,CAACI,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,IAAI,GAAGhB,IAAI,CAACY,IAAI;IACnE,OAAOgB,SAAS,GAAG,IAAI,GAAGH,UAAU;EACtC,CAAC,CAAC;EAEF,OAAO;IACLN,MAAM,EAAEA,MAAM;IACdE,MAAM,EAAEA;EACV,CAAC;AACH,CAAC;;AAED;;AAEA,OAAO,IAAMQ,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;EAC/B,IAAIC,IAAI,GAAGC,KAAK,CAACC,IAAI,CACnB;IACErC,MAAM,EAAE;EACV,CAAC,EACD;IAAA,OAAMsC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC;EAAA,CACxC,CAAC;EACDL,IAAI,CAACxB,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC;IAAA,OAAMD,CAAC,GAAGC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;EAAA,CAAC,CAAC;EACrC,IAAM4B,OAAO,GAAG,SAAVA,OAAOA,CAAIpC,IAAI,EAAK;IACxB,IAAIsB,QAAQ,GAAG,IAAIC,IAAI,CAAC,CAAC,CAAC;IAC1BD,QAAQ,CAACE,UAAU,CAACxB,IAAI,CAAC;IACzB,IAAIyB,UAAU,GAAGH,QAAQ,CAACI,WAAW,CAAC,CAAC,CAACC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC;IACrD,OAAO,IAAI,GAAGF,UAAU;EAC1B,CAAC;EACD,OAAO;IACLN,MAAM,EAAEW,IAAI;IACZT,MAAM,EAAE,YAAAgB,MAAA,CACKD,OAAO,CAACN,IAAI,CAAC,CAAC,CAAC,CAAC,cAAAO,MAAA,CAChBD,OAAO,CAACN,IAAI,CAAC,CAAC,CAAC,CAAC,gBAAAO,MAAA,CACdD,OAAO,CAACN,IAAI,CAAC,CAAC,CAAC,CAAC,cAAAO,MAAA,CAClBD,OAAO,CAACN,IAAI,CAAC,CAAC,CAAC,CAAC,cAAAO,MAAA,CAChBD,OAAO,CAACN,IAAI,CAAC,CAAC,CAAC,CAAC,cAAAO,MAAA,CAChBD,OAAO,CAACN,IAAI,CAAC,CAAC,CAAC,CAAC;EAE/B,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module"}